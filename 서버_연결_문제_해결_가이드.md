# 서버 연결 문제 해결 가이드

## 현재 상황
- ✅ 서버는 실행 중 (curl 테스트 성공)
- ✅ 방화벽 규칙 설정됨
- ✅ Config.kt IP 주소: `172.16.2.178:8080`
- ⚠️ 앱에서 연결 실패 발생

## 해결 방법

### 1. Android Studio Logcat에서 실제 에러 확인

1. **Android Studio 하단의 Logcat 탭 열기**
2. **필터 설정:**
   - 태그: `ProfileSetup`
   - 또는 검색: `FAILED TO CONNECT`

3. **확인할 로그:**
   ```
   ProfileSetup: 프로필 저장 요청 URL: http://172.16.2.178:8080/auth/profile
   ProfileSetup: 서버 연결 시도 중...
   ProfileSetup: 프로필 저장 실패: [에러 메시지]
   ```

### 2. 서버 연결 테스트

PowerShell에서 직접 테스트:
```powershell
# 서버 응답 확인
curl http://172.16.2.178:8080

# 또는 브라우저에서
# http://172.16.2.178:8080 접속
```

### 3. 앱 재빌드 및 실행

1. **Android Studio에서:**
   - Build > Rebuild Project
   - 앱 재설치 및 실행

2. **프로필 입력 화면에서:**
   - 모든 정보 입력 후 "시작하기" 버튼 클릭
   - 에러 메시지 확인

### 4. 네트워크 보안 설정 확인

`app/src/main/res/xml/network_security_config.xml` 파일 확인:
- `cleartextTrafficPermitted="true"` 설정 확인
- 또는 특정 IP 허용 설정 확인

### 5. Spring Boot 서버 로그 확인

IntelliJ IDEA에서 Spring Boot 서버 로그 확인:
- 앱에서 요청이 서버에 도달하는지 확인
- 서버 측 에러 메시지 확인

## 개선된 에러 처리

이제 앱에서 다음과 같은 구체적인 에러 메시지를 받을 수 있습니다:

1. **호스트를 찾을 수 없음 (UnknownHostException)**
   - IP 주소 확인 필요
   - USB 테더링 연결 확인

2. **연결 거부 (ConnectException)**
   - 서버 실행 확인
   - 방화벽 설정 확인

3. **타임아웃 (SocketTimeoutException)**
   - 네트워크 연결 확인
   - 서버 응답 시간 확인

## 다음 단계

1. **앱을 재빌드하고 실행**
2. **Logcat에서 실제 에러 메시지 확인**
3. **에러 메시지에 따라 위의 해결 방법 적용**

## 추가 디버깅

Logcat에서 다음 명령어로 필터링:
```
tag:ProfileSetup
```

또는:
```
ProfileSetup | FAILED | ERROR
```

실제 에러 메시지를 확인하면 더 정확한 해결 방법을 제시할 수 있습니다.

